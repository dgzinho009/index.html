<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Painel Guilda Soberanos FF</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#FFD700" />
  <link rel="icon" href="https://i.imgur.com/7pYLORP.png" type="image/png" />
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;400&display=swap" as="style" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;400&display=swap" media="print" onload="this.media='all'" />

  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" as="style" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" media="print" onload="this.media='all'" />

  <noscript>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;400&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  </noscript>
  <style>
    :root {
      --main-bg: linear-gradient(135deg, #161616 0%, #232323 100%);
      --glass-bg: rgba(26, 26, 38, 0.72);
      --card-bg: rgba(26, 26, 38, 0.80);
      --nav-bg: rgba(16,16,24,0.90);
      --gold: #FFD700;
      --blue: #37a6ff;
      --purple: #a259ff;
      --red: #f05454;
      --white: #fff;
      --accent: #f05454;
      --shadow: 0 2px 18px #0008;
      --radius: 32px;
      --glass-blur: blur(12px);
      --gradient-gold: linear-gradient(90deg, #FFD700 60%, #fff 100%);
      --gradient-blue: linear-gradient(90deg, #37a6ff 60%, #FFD700 100%);
      --gradient-purple: linear-gradient(90deg, #a259ff 60%, #FFD700 100%);
      --gradient-red: linear-gradient(90deg, #f05454 60%, #FFD700 100%);
      --badge-shadow: 0 1px 8px #FFD70088;
      --glass-border: 1.5px solid #ffffff22;
      --trans: cubic-bezier(.53,0,.44,1) .25s;
      --transition-theme: 0.3s ease;
    }
    html,
    body {
      height: 100%;
    }
    body {
      background: var(--main-bg);
      color: var(--white);
      font-family: 'Montserrat', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      letter-spacing: 0.01em;
      overflow-x: hidden;
      position: relative;
      transition:
        background var(--transition-theme),
        color var(--transition-theme);
    }
    body.light {
      --main-bg: linear-gradient(135deg, #fffde4 0%, #f7f7f7 100%);
      --glass-bg: rgba(255, 255, 255, 0.77);
      --card-bg: rgba(255, 255, 255, 0.92);
      --white: #232323;
      --shadow: 0 2px 18px #ffd70044;
      --glass-border: 2px solid #ffd70044;
    }
    #bg-particles {
      position: fixed;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      z-index: 0;
      pointer-events: none;
    }
    header {
      background: var(--gradient-gold);
      box-shadow: 0 6px 24px #ffd70022;
      padding: 24px 0 18px 0;
      border-radius: 0 0 var(--radius) var(--radius);
      z-index: 2;
      text-align: center;
      position: relative;
      /* Removida transição de background diretamente em gradiente */
    }
    .logo {
      width: 84px;
      height: 84px;
      border-radius: 22px;
      border: 3.5px solid var(--gold);
      background: #fff;
      margin-bottom: 7px;
      box-shadow: 0 2px 24px #ffd70076;
      transition: transform 0.2s;
    }
    .logo:hover {
      transform: scale(1.06) rotate(-2deg);
    }
    .title {
      font-size: 2.25rem;
      font-weight: 1200;
      letter-spacing: 2.8px;
      color: var(--gold);
      text-shadow: 0 2px 24px #ffd7002a, 0 1px 0 #fff3;
      margin: 0 0 2px 0;
      letter-spacing: 2.2px;
    }
    .subtitle {
      color: #fff;
      font-size: 1.11rem;
      font-weight: 700;
      margin-bottom: 7px;
      text-shadow: 0 2px 8px #232323cc;
      letter-spacing: 0.4px;
      transition: color 0.18s;
    }
    .mode-switch {
      position: absolute;
      top: 16px;
      right: 18px;
      background: var(--glass-bg);
      border: var(--glass-border);
      border-radius: 13px;
      cursor: pointer;
      font-size: 1.18em;
      color: var(--gold);
      z-index: 999;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 10px #ffd70044;
      transition: background 0.2s, color 0.18s;
      outline: 2px solid transparent; /* Estilização do outline */
      outline-offset: 2px;
    }
    .mode-switch:hover {
      background: var(--card-bg);
      color: var(--purple);
    }
    .mode-switch:focus-visible { /* Acessibilidade de foco */
        outline-color: var(--accent);
    }
    .menu-hamburger {
      display: block;
      position: absolute;
      top: 15px;
      left: 18px;
      background: none;
      border: none;
      cursor: pointer;
      z-index: 1001;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      transition: background 0.18s;
      outline: 2px solid transparent; /* Estilização do outline */
      outline-offset: 2px;
    }
    .menu-hamburger:focus-visible { /* Acessibilidade de foco */
        outline-color: var(--accent);
    }
    .menu-hamburger .bar {
      display: block;
      width: 27px;
      height: 4px;
      margin: 5px auto;
      border-radius: 3px;
      background: #000;
      transition: 0.3s;
    }
    .menu-hamburger.open .bar:nth-child(1) {
      transform: rotate(45deg) translate(5px, 7px);
    }
    .menu-hamburger.open .bar:nth-child(2) {
      opacity: 0;
    }
    .menu-hamburger.open .bar:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -7px);
    }
    nav.menu {
      background: var(--nav-bg);
      box-shadow: 0 1px 16px #ffd70033;
      border-radius: 0 0 var(--radius) var(--radius);
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 9px;
      min-height: 54px;
      z-index: 1000;
      position: relative;
      margin-bottom: 22px;
      transition:
        background var(--transition-theme),
        transform 0.3s ease,
        opacity 0.3s ease;
    }
    .menu-btn {
      background: none;
      color: #ccc;
      font-size: 1.14em;
      font-weight: 700;
      border: none;
      border-radius: 14px 14px 0 0;
      padding: 12px 23px 8px 19px;
      margin: 0;
      cursor: pointer;
      transition: background 0.15s, color 0.11s, transform 0.13s;
      outline: 2px solid transparent; /* Estilização do outline */
      outline-offset: 2px;
      letter-spacing: 0.7px;
      position: relative;
      border-bottom: 2.5px solid transparent;
      border-top: 2.5px solid transparent;
      box-shadow: 0 0 0 transparent;
      user-select: none;
      display: flex;
      align-items: center;
    }
    .menu-btn:focus-visible { /* Acessibilidade de foco */
        outline-color: var(--accent);
    }
    .menu-btn .tabicon {
      font-family: 'Material Symbols Outlined', Arial, sans-serif;
      font-variation-settings: 'FILL' 1, 'wght' 700;
      font-size: 1.33em;
      margin-right: 7px;
      vertical-align: middle;
      color: var(--gold);
      /* Cor padrão dos ícones */
      transition: color 0.11s;
    }
    /* Estilos específicos para ícones (se houver variação além do gold padrão) */
    .menu-btn[data-tab="ranking"] .tabicon { color: var(--blue); }
    .menu-btn[data-tab="staff"] .tabicon { color: var(--purple); }
    .menu-btn[data-tab="guerra"] .tabicon { color: var(--red); }
    .menu-btn[data-tab="parceiros"] .tabicon { color: var(--blue); }
    .menu-btn[data-tab="recrutamento"] .tabicon { color: var(--purple); }
    .menu-btn[data-tab="streamers"] .tabicon { color: var(--red); }
    .menu-btn[data-tab="denuncia"] .tabicon { color: var(--red); }
    .menu-btn[data-tab="sugestoes"] .tabicon { color: var(--blue); }
    .menu-btn[data-tab="adm"] .tabicon { color: var(--red); }

    .menu-btn.active,
    .menu-btn:focus,
    .menu-btn:hover {
      background: var(--glass-bg);
      color: var(--gold);
      border-bottom: 2.5px solid var(--accent);
      box-shadow: 0 2px 10px #ffd70033;
      font-weight: 900;
      z-index: 10;
      transform: translateY(-2px) scale(1.05);
    }
    .menu-btn.active .tabicon,
    .menu-btn:focus .tabicon,
    .menu-btn:hover .tabicon {
      color: var(--red);
      /* Ícone vermelho quando ativo/hover */
    }
    .badge-dot {
      position: absolute;
      top: 8px;
      right: 11px;
      width: 14px;
      height: 14px;
      background: #ffd700;
      border: 2px solid #232323;
      border-radius: 50%;
      box-shadow: var(--badge-shadow);
      animation: badgePulse 1s infinite alternate;
      z-index: 3;
      display: inline-block;
    }
    @keyframes badgePulse {
      0% {
        box-shadow: 0 0 8px #ffd70055;
      }
      100% {
        box-shadow: 0 0 18px #ffd700cc;
      }
    }
    @media (max-width: 950px) {
      .cards-grid {
        grid-template-columns: 1fr;
      }
      .card {
        padding: 10px 2vw 8px 2vw;
      }
      nav.menu {
        gap: 0;
        flex-wrap: wrap;
      }
      .menu-btn {
        padding: 8px 9px 6px 9px;
        font-size: 1em;
      }
    }
    @media (max-width: 700px) {
      .menu-hamburger {
        display: block;
      }
      nav.menu {
        flex-direction: column;
        align-items: stretch;
        justify-content: flex-start;
        gap: 0;
        position: fixed;
        left: 0;
        top: 0;
        width: 78vw;
        max-width: 340px;
        height: 100vh;
        border-radius: 0 22px 22px 0;
        box-shadow: 8px 0 36px #ffd70044;
        transform: translateX(-100%);
        opacity: 0;
        pointer-events: none;
        z-index: 1999;
      }
      nav.menu.open {
        transform: translateX(0);
        opacity: 1;
        pointer-events: all;
      }
      .menu-btn {
        display: block;
        text-align: left;
        border-radius: 0 19px 19px 0;
        width: 100%;
        padding: 14px 8px 12px 22px;
        font-size: 1.08em;
        margin: 0;
        border-bottom: 1.5px solid #ffd70033;
        background: none;
        box-shadow: none;
      }
      .menu-btn.active,
      .menu-btn:focus,
      .menu-btn:hover {
        background: var(--glass-bg);
        color: var(--gold);
        font-weight: 900;
        border-bottom: 2.5px solid var(--accent);
        transform: scale(1.03);
      }
    }
    @media (max-width: 530px) {
      .title {
        font-size: 1.13rem;
      }
      .logo {
        width: 48px;
        height: 48px;
      }
    }
    .main-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2vw 20px 2vw;
      z-index: 1;
      position: relative;
      margin-top: 13px;
    }
    .hero-banner {
      margin: 30px auto 40px auto;
      max-width: 520px;
      background: var(--glass-bg);
      border-radius: 38px;
      box-shadow: 0 2px 42px #ffd70011;
      padding: 34px 18px 44px 18px;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      overflow: visible;
      backdrop-filter: var(--glass-blur);
      border: var(--glass-border);
      animation: fadeIn 0.8s;
      transition:
        background var(--transition-theme),
        border-color var(--transition-theme);
    }
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
    .hero-logo img {
      width: 130px;
      height: 130px;
      border-radius: 26px;
      border: 5px solid #ffd700;
      box-shadow: 0 0 16px #ffd70044, 0 0 0 6px #232323;
      background: #111;
      object-fit: cover;
      margin-bottom: 14px;
    }
    .guilda-title {
      font-size: 1.36rem;
      font-weight: 800;
      color: #ffd700;
      letter-spacing: 2px;
      margin-bottom: 5px;
      text-shadow: 0 2px 14px #ffd70044;
      text-align: center;
    }
    .guilda-nome {
      display: flex;
      align-items: baseline;
      gap: 8px;
      margin: 0 0 8px 0;
      justify-content: center;
    }
    .guilda-nome-principal {
      font-size: 2.2rem;
      font-weight: 900;
      color: #ffd700;
      letter-spacing: 6px;
      text-shadow: 0 2px 16px #ffd70080, 0 1px 0 #fff3;
      filter: drop-shadow(0 2px 10px #ffd70033);
    }
    .guilda-nome-sufixo {
      font-size: 1.34rem;
      font-weight: 700;
      color: #ffd700bb;
      letter-spacing: 1.5px;
      margin-left: 2px;
      text-shadow: 0 1px 6px #ffd70022;
    }
    .guilda-frase {
      font-size: 1.22rem;
      color: #fff;
      margin-bottom: 2px;
      text-align: center;
      text-shadow: 0 1px 8px #ffd70022;
    }
    .guilda-frase-destaque {
      color: #ffd700;
      font-weight: 900;
      letter-spacing: 2.5px;
      font-size: 1.19em;
      text-shadow: 0 2px 10px #ffd70088;
    }
    .guilda-cta {
      margin-top: 33px;
      text-align: center;
    }
    .cta-btn {
      display: inline-block;
      background: var(--gradient-gold);
      color: #232323;
      font-weight: 900;
      font-size: 1.32em;
      letter-spacing: 1.5px;
      padding: 15px 40px;
      border-radius: 16px;
      box-shadow: 0 2px 22px #ffd70077;
      text-decoration: none;
      transition: background 0.18s, color 0.11s, transform 0.13s;
      border: none;
      margin-bottom: 8px;
      outline: 2px solid transparent; /* Estilização do outline */
      outline-offset: 2px;
    }
    .cta-btn:focus-visible { /* Acessibilidade de foco */
        outline-color: var(--accent);
    }
    .cta-btn:hover,
    .cta-btn:focus {
      background: var(--gradient-blue);
      color: #fff;
      transform: scale(1.03);
    }
    .cta-btn.whatsapp {
      background: linear-gradient(90deg, #25d366 70%, #128c7e 100%);
      color: #fff;
      position: relative;
    }
    .cta-btn.whatsapp::before {
      content: '';
      display: inline-block;
      background: url('https://img.icons8.com/color/48/000000/whatsapp.png') no-repeat center/contain;
      width: 1.2em;
      height: 1.2em;
      vertical-align: middle;
      margin-right: 8px;
      position: relative;
      top: 2px;
    }
    .cta-btn.group {
      background: var(--gradient-purple);
      color: #181818;
      margin-left: 0;
      margin-top: 8px;
      font-size: 1.13em;
    }
    .tab-loader {
      position: fixed;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(24, 24, 24, 0.32);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      pointer-events: all;
    }
    .loader {
      width: 48px;
      height: 48px;
      border: 5px solid #ffd70077;
      border-top: 5px solid #ffd700;
      border-radius: 50%;
      animation: spin 0.85s linear infinite;
    }
    @keyframes spin {
      100% {
        transform: rotate(360deg);
      }
    }
    .destaque {
      background: linear-gradient(90deg, #ffd70033 70%, #37a6ff22 100%);
      border-radius: var(--radius);
      padding: 18px 24px;
      margin-bottom: 32px;
      color: #ffd700;
      text-align: center;
      font-size: 1.14em;
      box-shadow: 0 2px 14px #ffd70022;
      border-left: 5px solid var(--accent);
      backdrop-filter: blur(5px);
      border: var(--glass-border);
      transition:
        background var(--transition-theme),
        border-color var(--transition-theme);
    }
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
      gap: 18px;
      margin-top: 20px;
    }
    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 19px 14px 13px 14px;
      box-shadow: var(--shadow);
      border: var(--glass-border);
      opacity: 0;
      visibility: hidden;
      transition:
        opacity 0.21s,
        visibility 0.18s,
        box-shadow 0.17s,
        transform 0.13s,
        background var(--transition-theme),
        border-color var(--transition-theme);
      position: relative;
      min-height: 90px;
      display: none; /* Mantido display: none para alternar as abas */
      overflow: hidden;
      animation: cardIn 0.7s;
      backdrop-filter: var(--glass-blur);
      background-image: linear-gradient(140deg, #ffd70022 0%, #37a6ff11 80%, #a259ff11 100%);
    }
    .card.active {
      display: block;
      opacity: 1;
      visibility: visible;
      animation: cardIn 0.6s;
      transform: scale(1.01);
      border-image: var(--gradient-gold) 1;
      outline: 2px solid transparent;
    }
    @keyframes cardIn {
      from {
        opacity: 0;
        transform: translateY(18px) scale(0.97);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    .card h2 {
      color: var(--gold);
      margin-top: 0;
      font-size: 1.18rem;
      letter-spacing: 1.2px;
      font-weight: 900;
      border-bottom: 2px solid var(--accent);
      display: inline-block;
      text-shadow: 0 1px 6px #ffd70022;
      margin-bottom: 10px;
      padding-bottom: 3px;
      animation: fadeIn 0.8s;
    }
    .ranking-list {
      margin: 0;
      padding: 0;
      list-style: none;
    }
    .ranking-list li {
      background: #ffd70022;
      margin-bottom: 8px;
      padding: 9px 15px;
      border-radius: 11px;
      color: #ffd700;
      font-weight: 700;
      box-shadow: 0 1px 7px #ffd70022;
      border-left: 4.5px solid var(--accent);
      font-size: 1.06em;
      display: flex;
      align-items: center;
      gap: 12px;
      position: relative;
      animation: cardIn 0.8s;
      transition:
        background var(--transition-theme),
        border-color var(--transition-theme);
    }
    .ranking-badge {
      font-size: 1.3em;
      font-weight: bold;
      color: #181818;
      background: var(--gradient-gold);
      border-radius: 8px 0 0 8px;
      padding: 4px 13px 4px 10px;
      display: inline-block;
      margin-right: 4px;
      filter: drop-shadow(0 1px 7px #ffd70055);
    }
    .ranking-badge.second { background: var(--gradient-blue); }
    .ranking-badge.third { background: var(--gradient-purple); }

    .ranking-bar {
      display: inline-block;
      height: 12px;
      background: var(--gradient-blue);
      border-radius: 5px;
      margin-left: 12px;
      min-width: 20px;
      transition: width 0.5s;
    }
    .ranking-list li:first-child .ranking-bar {
      width: 80px;
      background: var(--gradient-gold);
    }
    .ranking-list li:nth-child(2) .ranking-bar {
      width: 55px;
      background: var(--gradient-blue);
    }
    .ranking-list li:nth-child(3) .ranking-bar {
      width: 35px;
      background: var(--gradient-purple);
    }
    .ranking-list li .medal {
      margin-left: 7px;
      font-size: 1.24em;
      color: var(--gold);
    }
    .medal.second { color: var(--blue); }
    .medal.third { color: var(--purple); }

    .staff-list, .streamers-list, .parceiros-list, .sugestoes-list, .novidades-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .staff-member, .streamer-card, .parceiro-card, .sugestao-item, .aviso-item {
      display: flex;
      align-items: center;
      gap: 14px;
      margin-bottom: 18px;
      padding-bottom: 6px;
      border-bottom: 1px solid #ffd70022;
      animation: fadeIn 0.9s;
    }
    .staff-avatar, .streamer-avatar {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      object-fit: cover;
      border: 2.5px solid #ffd700;
      box-shadow: 0 1px 7px #ffd70066;
      background: #fff;
      flex-shrink: 0;
    }
    .staff-info, .streamer-info, .parceiro-info, .sugestao-info, .aviso-info {
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .staff-name, .streamer-name, .parceiro-name, .sugestao-nome {
      font-weight: bold;
      color: #ffd700;
      font-size: 1.13em;
      margin-bottom: 2px;
      text-shadow: 0 1px 5px #ffd70033;
    }
    .staff-role, .streamer-platform, .parceiro-contato {
      font-size: 0.98em;
      color: #ffd700bb;
      font-weight: 600;
    }
    .status-badge {
      display: inline-block;
      padding: 3px 16px;
      border-radius: 13px;
      margin-left: 10px;
      font-size: 0.89em;
      font-weight: bold;
      color: #fff;
      background: var(--gradient-blue);
      box-shadow: 0 1px 7px #37a6ff44;
      vertical-align: middle;
      animation: badgePulse 2s infinite alternate;
    }
    .guerra-titulo {
      display: flex;
      align-items: center;
      font-size: 1.28em;
      font-weight: 900;
      color: #ffd700;
      margin-bottom: 10px;
      gap: 8px;
      letter-spacing: 1.1px;
      text-shadow: 0 1px 8px #ffd70044;
    }
    .guerra-titulo .guerra-icone {
      font-size: 1.2em;
      margin-right: 4px;
    }
    .guerra-card {
      background: #1c1c1cf2;
      border: 2px solid #ffd700;
      border-radius: 20px;
      padding: 24px 13px 17px 13px;
      margin-bottom: 12px;
      box-shadow: 0 2px 20px #ffd70020;
      text-align: center;
      max-width: 430px;
      margin-left: auto;
      margin-right: auto;
      position: relative;
      background: var(--glass-bg);
      backdrop-filter: var(--glass-blur);
      transition:
        background var(--transition-theme),
        border-color var(--transition-theme);
    }
    .guerra-contador {
      background: #222c46;
      color: #ffd700;
      font-size: 1.19em;
      font-weight: bold;
      border-radius: 10px;
      padding: 15px 8px;
      margin: 0 auto 15px auto;
      display: inline-block;
      box-shadow: 0 1px 12px #ffd70033;
      border: 2px solid #ffd70066;
      min-width: 230px;
      letter-spacing: 1px;
    }
    .guerra-detalhe {
      color: #ffd70099;
      margin-top: 8px;
      margin-bottom: 8px;
      font-size: 1.03em;
    }
    .guerra-fuso {
      margin-top: 8px;
      color: #ffd700cc;
      font-weight: bold;
      font-size: 1.06em;
    }
    .guerra-fuso select {
      background: #232323;
      color: #ffd700;
      border-radius: 8px;
      border: 1.5px solid #ffd70055;
      font-size: 1em;
      font-family: inherit;
      padding: 4px 10px;
      margin-left: 6px;
      margin-right: 6px;
      transition:
        background var(--transition-theme),
        border-color var(--transition-theme);
      outline: 2px solid transparent; /* Estilização do outline */
      outline-offset: 2px;
    }
    .guerra-fuso select:focus-visible { /* Acessibilidade de foco */
        outline-color: var(--accent);
    }
    .guerra-reset-info {
      color: #ffd700bb;
      font-size: 0.99em;
      margin-top: 4px;
      display: block;
    }
    .form-check-group {
      margin-bottom: 14px;
    }
    .form-check-row {
      display: flex;
      align-items: center;
      gap: 9px;
      margin-bottom: 7px;
    }
    #form-recrutamento input[type="radio"],
    #form-recrutamento input[type="checkbox"],
    #form-sugestoes input[type="radio"],
    #form-sugestoes input[type="checkbox"] {
      width: 18px;
      height: 18px;
      accent-color: var(--gold);
      margin-right: 7px;
      margin-left: 0;
      vertical-align: middle;
      position: relative;
      top: 0;
    }
    .adm-section {
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(255, 215, 0, 0.2);
    }
    .adm-input-group {
      margin-bottom: 10px;
    }
    .adm-input-group label {
      display: block;
      color: var(--gold);
      margin-bottom: 5px;
      font-weight: 600;
    }
    .adm-input,
    .adm-textarea {
      width: 100%;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid var(--gold);
      background: rgba(0, 0, 0, 0.3);
      color: white;
      font-family: 'Montserrat', sans-serif;
      transition:
        background var(--transition-theme),
        border-color var(--transition-theme);
      outline: 2px solid transparent; /* Estilização do outline */
      outline-offset: 2px;
    }
    .adm-input:focus-visible,
    .adm-textarea:focus-visible { /* Acessibilidade de foco */
        outline-color: var(--accent);
    }
    @media (max-width: 600px) {
      .form-check-row span {
        font-size: 1em !important;
      }
      .guerra-card {
        padding: 15px 4vw 9px 4vw;
      }
      .guerra-contador {
        font-size: 1em;
        min-width: 150px;
        padding: 10px 3vw;
      }
      .staff-avatar, .streamer-avatar {
        width: 36px;
        height: 36px;
      }
    }
    .toast-notification {
      position: fixed;
      bottom: 32px;
      left: 50%;
      transform: translateX(-50%);
      background: #232323ee;
      color: #ffd700;
      border: 2px solid #ffd700aa;
      border-radius: 18px;
      padding: 16px 28px;
      font-size: 1.14em;
      font-weight: bold;
      opacity: 0;
      pointer-events: none;
      z-index: 9999;
      box-shadow: 0 2px 18px #ffd70033;
      transition: opacity 0.25s;
    }
    .toast-notification.show {
      opacity: 1;
      pointer-events: all;
    }
    .toast-notification.toast-error {
      color: #fff;
      border-color: #f05454;
      background: #f05454e6;
    }
    #msg-recrutamento, #msg-sugestao {
      text-align: center;
      margin-top: 10px;
      padding: 8px 12px;
      border-radius: 8px;
      font-weight: bold;
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
      color: var(--white);
      background: rgba(255, 215, 0, 0.2);
      border: 1px solid #FFD700;
    }
    #msg-recrutamento.show, #msg-sugestao.show {
      opacity: 1;
    }
    #msg-recrutamento.error, #msg-sugestao.error {
      background: rgba(240, 84, 84, 0.2);
      border-color: #f05454;
    }

    ::-webkit-scrollbar {
      width: 8px;
      background: #232323;
    }
    ::-webkit-scrollbar-thumb {
      background: #ffd70077;
      border-radius: 16px;
    }
    body.light ::-webkit-scrollbar-thumb {
      background: #ffd700cc;
    }
    footer {
      text-align: center;
      padding: 30px 0 12px 0;
      font-size: 1.04em;
      color: #ffd700bb;
      background: none;
      letter-spacing: 0.6px;
      z-index: 2;
      position: relative;
    }
  </style>
</head>
<body>
  <canvas id="bg-particles" aria-hidden="true"></canvas>
  <header>
    <img src="https://i.imgur.com/7pYLORP.png" class="logo" alt="Logo da Guilda Soberanos FF" loading="lazy" />
    <div class="title">Soberanos FF</div>
    <div class="subtitle">Painel gamer premium • Seu espaço de evolução no Free Fire</div>
    <button class="mode-switch" id="modeSwitch" title="Alternar tema" aria-label="Alternar tema">
      <span id="modeIcon" class="material-symbols-outlined">dark_mode</span>
    </button>
    <button class="menu-hamburger" id="menuHamburger" aria-label="Abrir menu">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>
  </header>
  <nav class="menu" id="menuNav" aria-label="Menu principal">
    <button class="menu-btn active" data-tab="membros" aria-label="Melhores"><span 
class="tabicon">star</span>Melhores</button>
    <button class="menu-btn" data-tab="ranking" aria-label="Ranking"><span class="tabicon">emoji_events</span>Ranking</button>
    <button class="menu-btn" data-tab="staff" aria-label="Equipe"><span class="tabicon">shield</span>Staff</button>
    <button class="menu-btn" data-tab="regras" aria-label="Regras"><span class="tabicon">rule</span>Regras</button>
    <button class="menu-btn" data-tab="guerra" aria-label="Guerra"><span class="tabicon">swords</span>Guerra</button>
    <button class="menu-btn" data-tab="parceiros" aria-label="Parceiros"><span class="tabicon">handshake</span>Parceiros</button>
    <button class="menu-btn" data-tab="recrutamento" aria-label="Recrutamento">
      <span class="tabicon">edit</span>
      Recrutamento
      <span class="badge-dot" title="Recrutamento aberto"></span>
    </button>
    <button class="menu-btn" data-tab="streamers" aria-label="Streamers"><span class="tabicon">stadia_controller</span>Streamers</button>
    <button class="menu-btn" data-tab="avisos" aria-label="Avisos"><span class="tabicon">campaign</span>Avisos</button>
    <button class="menu-btn" data-tab="denuncia" aria-label="Denúncia"><span class="tabicon">report</span>Denúncia</button>
   
    <button class="menu-btn" data-tab="sugestoes" aria-label="Sugestões"><span class="tabicon">lightbulb</span>Sugestões</button>
    <button class="menu-btn" data-tab="adm" aria-label="Painel ADM"><span class="tabicon">admin_panel_settings</span>Painel ADM</button>
  </nav>
  <div id="tab-loader" class="tab-loader" style="display:none">
    <span class="loader"></span>
  </div>
  <section class="hero-banner">
    <div class="hero-logo">
      <img src="https://i.imgur.com/7pYLORP.png" alt="Logo Soberanos" loading="lazy" />
    </div>
    <div class="guilda-title">
      Painel Guilda
    </div>
    <div class="guilda-nome">
      <span class="guilda-nome-principal">SOBERANOS</span>
      <span class="guilda-nome-sufixo">FF</span>
    </div>
    <div class="guilda-frase">
     
    Caminhe com reis. Jogue como um <span class="guilda-frase-destaque">SOBERANO</span>.
    </div>
    <div class="guilda-cta">
      <a href="https://www.instagram.com/ss_soberanos?igsh=b25zYmcyOThxcGM3" class="cta-btn" target="_blank" rel="noopener">Juntar-se</a>
    </div>
  </section>
  <div class="main-content">
    <div class="destaque">
      <b>🚨 Aviso:</b> <span id="destaque-message-display">Recrutamento aberto!
Preencha o formulário e anexe seu print do perfil. Participe da família Soberanos FF!</span>
      <span class="status-badge">Online</span>
    </div>
    <div class="cards-grid">
      <section class="card active" id="membros">
        <h2>⭐️ Melhores da Semana</h2>
        <ol class="ranking-list" id="top-members-list">
          </ol>
        <div class="congrats-message" style="color:#FFD70099; font-size:1em;text-align:center; margin-top:18px;">
          </div>
      </section>
   
      <section class="card" id="ranking">
        <h2>🏆 Ranking Interno</h2>
        <div style="margin-bottom:1.3em;">
          <button class="ranking-tab-btn active" data-rank="semanal">Semanal</button>
          <button class="ranking-tab-btn" data-rank="mensal">Mensal</button>
        </div>
        <ul class="ranking-list" id="rankingSemanal">
          <li>Ranking semanal será iniciado em breve!</li>
        </ul>
        <ul class="ranking-list" 
id="rankingMensal" style="display:none">
          <li>Ranking mensal será iniciado em breve!</li>
        </ul>
      </section>
      <section class="card" id="staff">
        <h2>🛡️ Equipe/Staff</h2>
        <ul class="staff-list" id="staff-list">
          </ul>
        <div style="margin:18px 0 0 0;
color:#FFD70099; text-align:center; font-size:1.01em;">
          <em>Novos membros da equipe serão apresentados em breve!</em>
        </div>
      </section>
      <section class="card" id="regras">
        <h2>📜 Regras da Guilda</h2>
        <ul id="regras-ul" style="color:#FFD700;
font-weight:600; font-size:1.08em; margin-bottom:1.4em;">
          </ul>
        <div style="color:#FFD70099;
font-size:1em;text-align:center;">
          <em>Dúvidas? Fale com a equipe pelo Instagram ou WhatsApp!</em>
        </div>
      </section>
      <section class="card" id="guerra">
        <h2 class="guerra-titulo"><span class="guerra-icone">⚔️</span>Contagem da Guerra</h2>
        <div class="guerra-card">
          <div id="contador-guerra" class="guerra-contador"></div>
          <div class="guerra-detalhe">
            Acompanhe o tempo até 
a próxima guerra!
          </div>
          <div class="guerra-fuso">
            Fuso selecionado:
            <select id="fuso-guerra">
              <option value="-3">Brasília (UTC-3)</option>
              <option value="-4">Amazonas (UTC-4)</option>
            </select>
       
    </div>
          <span id="hora-reset-info" class="guerra-reset-info"></span>
        </div>
      </section>
      <section class="card" id="parceiros">
        <h2>🤝 Parceiros Soberanos FF</h2>
        <div class="parceiros-list" id="parceiros-list">
          </div>
        <div style="margin:20px 0 0 0;
color:#ffd700cc; text-align:center; font-size:1.04em;">
          <em>Quer ser parceiro? Fale conosco!</em>
        </div>
      </section>
      <section class="card" id="recrutamento">
        <h2>🖊 Formulário de Recrutamento – Guilda Soberanos</h2>
        <div style="color:#FFD700;
font-size:1.02em; text-align:center; margin-bottom:20px;">
          Caminhe com reis. Jogue como um soberano. 👑<br>
          <span style="color:#FFD70099;">Preencha atentamente. Ao enviar, você será redirecionado ao WhatsApp do ADM e pode anexar o print do perfil.</span>
        </div>
        <form id="form-recrutamento" style="max-width:440px;margin:auto;">
          <label style="color:#FFD700;font-weight:600;">1. Nick no jogo (com símbolo, se tiver):</label>
          <input type="text" id="nick" required placeholder="Seu nick no 
jogo" pattern=".{3,20}" title="Nick deve ter entre 3 e 20 caracteres" class="adm-input"/>
          <label style="color:#FFD700;font-weight:600;">2. ID do jogador (Free Fire):</label>
          <input type="text" id="idff" required placeholder="ID do jogador" pattern="\d+" title="ID deve conter apenas números" class="adm-input"/>
          <label style="color:#FFD700;font-weight:600;">3. Idade:</label>
          <input type="number" id="idade" required placeholder="Sua idade" min="12" max="99" class="adm-input"/>
          <label style="color:#FFD700;font-weight:600;">4.
Está em qual patente atualmente?</label>
          <input type="text" id="patente" required placeholder="Ex: Mestre, Dima 4..." class="adm-input"/>
          <label style="color:#FFD700;font-weight:600;">5.
Já fez parte de guilda competitiva?</label>
          <input type="text" id="guilda_comp" required placeholder="Sim/Não ou detalhe" class="adm-input"/>
          <label style="color:#FFD700;font-weight:600;">6.
Qual sua função principal?</label>
          <div class="form-check-group">
            <div class="form-check-row"><input type="radio" name="funcao" value="Rushador" required> <span>Rushador</span></div>
            <div class="form-check-row"><input type="radio" name="funcao" value="Suporte"> <span>Suporte</span></div>
            <div class="form-check-row"><input type="radio" name="funcao" value="Capitão / Líder de cal"> <span>Capitão / Líder de cal</span></div>
            <div class="form-check-row"><input type="radio" name="funcao" value="Sniper"> <span>Sniper</span></div>
         
    </div>
          <label style="color:#FFD700;font-weight:600;">7.
Você tem disponibilidade para:</label>
          <div class="form-check-group">
            <div class="form-check-row"><input type="checkbox" name="disp" value="Treinos"> <span>Treinos</span></div>
            <div class="form-check-row"><input type="checkbox" name="disp" value="Campeonatos"> <span>Campeonatos</span></div>
            <div class="form-check-row"><input type="checkbox" name="disp" value="Guerras de guilda"> <span>Guerras de guilda</span></div>
          </div>
          <label style="color:#FFD700;font-weight:600;">8.
Qual modo você manda melhor?</label>
          <div class="form-check-group">
            <div class="form-check-row"><input type="radio" name="modo" value="4x4 competitivo" required> <span>4x4 competitivo</span></div>
            <div class="form-check-row"><input type="radio" name="modo" value="X1 dos cria"> <span>X1 dos cria</span></div>
            <div class="form-check-row"><input type="radio" name="modo" value="Camp / Ranked"> <span>Camp / Ranked</span></div>
            <div class="form-check-row" style="align-items: flex-start;">
        
          <input type="radio" name="modo" value="Outro">
              <span style="flex:1;">
                Outro<br>
                <input type="text" id="modo_outro" placeholder="Se marcou Outro, especifique" style="margin-top:2px;width:100%;" class="adm-input"/>
              </span>
            </div>
          </div>
 
          <label style="color:#FFD700;font-weight:600;">9.
Você tem como trocar o nick para usar o nome da guilda?</label>
          <div class="form-check-group">
            <div class="form-check-row"><input type="radio" name="troca_nick" value="Sim" required> <span>Sim</span></div>
            <div class="form-check-row"><input type="radio" name="troca_nick" value="Não"> <span>Não</span></div>
            <div class="form-check-row"><input type="radio" name="troca_nick" value="Em breve"> <span>Em breve</span></div>
          </div>
          <label style="color:#FFD700;font-weight:600;">10.
Tem Instagram ou WhatsApp? Se sim, informe:</label>
          <input type="text" id="contato" required placeholder="@user ou (99) 99999-9999" class="adm-input"/>
          <label style="color:#FFD700;font-weight:600;">11.
Por que quer entrar para a Soberanos?</label>
          <textarea id="motivo" rows="3" required placeholder="Fale um pouco sobre você e o motivo" class="adm-textarea"></textarea>
          <div style="margin:18px 0 0 0;font-size:0.98em;color:#FFD700bb;">
            <b>12.
Envie um print do seu perfil no jogo:</b><br>
            <span style="font-size:0.97em;">Após enviar o formulário, <b>anexe a imagem diretamente no WhatsApp</b> ao ADM junto com sua mensagem.</span>
          </div>
          <button type="submit" class="cta-btn whatsapp" style="margin-top:16px;">Enviar e Falar com o ADM</button>
        </form>
        <a href="https://chat.whatsapp.com/HlBc51iCSPr0oe5yyftPDv" target="_blank" class="cta-btn group">Entrar No Grupo Do Recrutamento</a>
        <div id="msg-recrutamento" class="toast-notification"></div>
  
        <div style="color:#FFD70099;font-size:0.93em;margin-top:22px;text-align:center;">
          Ao enviar, você será redirecionado ao WhatsApp do ADM (<b>81 7338-9225</b>) com as respostas.
 <br> <b>Não esqueça de anexar seu print!</b>
        </div>
      </section>
      <section class="card" id="streamers">
        <h2>🎥 Streamers da Guilda</h2>
        <ul class="streamers-list" id="streamers-list">
          </ul>
        <div style="color:#FFD70099; font-size:0.9em; text-align:center; margin-top:20px;">
            <span id="streamer-message">Quando membros da guilda começarem a fazer lives ou vídeos, eles aparecerão aqui!</span>
        </div>
      </section>
      <section class="card" id="avisos">
        <h2>📝 Avisos Recentes</h2>
        <ul class="avisos-list" id="avisos-ul">
          </ul>
      </section>
      <section class="card" id="denuncia">
        <h2>🚨 Denúncia de Membro</h2>
        <div style="color:#FFD70099;text-align:center;margin-top:20px;">
          (Formulário de 
denúncia em breve)
        </div>
      </section>
      <section class="card" id="sugestoes">
        <h2>💡 Sugestões e Novidades</h2>
        <div style="color:#FFD700; font-size:1.05em; text-align:center; margin-bottom:18px;">
          Tem ideias para o painel?
Manda pra gente!
        </div>
        <form id="form-sugestoes" style="max-width:440px;margin:auto;">
            <label style="color:#FFD700;font-weight:600;">Seu Nome (opcional):</label>
            <input type="text" id="sugestao-nome" placeholder="Seu nome ou nick (opcional)" class="adm-input"/>
            <label style="color:#FFD700;font-weight:600;">Sua Sugestão:</label>
            <textarea id="sugestao-texto" rows="4" required placeholder="Descreva sua sugestão para o painel ou guilda" class="adm-textarea"></textarea>
            <button type="submit" class="cta-btn" style="margin-top:16px;">Enviar Sugestão</button>
        </form>
        <div id="msg-sugestao" class="toast-notification"></div>
        <div style="margin-top:30px;">
            <h3 style="color:var(--gold); border-bottom:1px solid var(--accent); padding-bottom:5px; margin-bottom:15px;">🚀 Novidades Recentes</h3>
            <ul class="novidades-list" id="novidades-ul">
                </ul>
            <div style="color:#FFD70099; font-size:0.9em; text-align:center; margin-top:20px;">
                <span id="novidades-message">Fique de olho nas atualizações do painel!</span>
            </div>
        </div>
      </section>
      <section class="card" id="adm">
        <h2>🔐 Painel ADM</h2>
        <div id="adm-login" style="display: block;">
          <div style="color:#FFD700; text-align:center; margin:20px 0;">
            Acesso restrito aos administradores
          </div>
          <form id="login-form" style="max-width: 300px; margin: 0 auto;">
       
          <label style="color:#FFD700;font-weight:600;">Usuário:</label>
            <input type="text" id="adm-user" required style="width: 100%; padding: 8px; margin-bottom: 10px; border-radius: 8px; border: 1px solid #FFD700; background: rgba(0,0,0,0.3); color: white;" class="adm-input">
            <label style="color:#FFD700;font-weight:600;">Senha:</label>
            <input type="password" id="adm-pass" required style="width: 100%; padding: 8px; margin-bottom: 15px; border-radius: 8px; border: 1px solid #FFD700; background: rgba(0,0,0,0.3); color: white;" class="adm-input">
            <button type="submit" class="cta-btn" style="width: 100%;">Entrar</button>
   
        </form>
        </div>
        <div id="adm-panel" style="display: none;">
          <div style="background: rgba(255, 215, 0, 0.1);
border-radius: 12px; padding: 15px; margin: 15px 0;">
            <h3 style="color: var(--gold);
border-bottom: 1px solid var(--gold); padding-bottom: 5px;">Editar Conteúdo do Site</h3>

            <div class="adm-section">
              <h4>Melhores da Semana</h4>
              <div class="adm-input-group">
                <label>1º Lugar:</label>
                <input type="text" id="membro1" class="adm-input">
            
          </div>
              <div class="adm-input-group">
                <label>2º Lugar:</label>
                <input type="text" id="membro2" class="adm-input">
              </div>
              <div class="adm-input-group">
                <label>3º Lugar:</label>
 
                <input type="text" id="membro3" class="adm-input">
              </div>
            </div>

            <div class="adm-section">
              <h4>Regras da Guilda (Uma regra por linha)</h4>
              <textarea id="regras-txt" rows="6" class="adm-textarea" placeholder="Digite uma regra por linha..."></textarea>
     
            </div>

            <div class="adm-section">
              <h4>Avisos Recentes (Uma aviso por linha - formato: YYYY-MM-DD - Seu Aviso)</h4>
              <textarea id="avisos-txt" rows="4" class="adm-textarea" placeholder="Digite um aviso por linha..."></textarea>
            </div>
            
            <div class="adm-section">
              <h4>Novidades Recentes (Uma novidade por linha)</h4>
              <textarea id="novidades-adm-txt" rows="4" class="adm-textarea" placeholder="Digite uma novidade por linha..."></textarea>
            </div>

            <div class="adm-section">
              <h4>Mensagem de Destaque</h4>
  
              <div class="adm-input-group">
                <input type="text" id="destaque-msg" class="adm-input" />
              </div>
            </div>

            <div class="adm-section">
              <h4>Status da Guilda</h4>
            
          <div class="adm-input-group">
                <input type="text" id="status-guilda" class="adm-input" />
              </div>
            </div>

            <div class="adm-section">
                <h4>Equipe/Staff (Uma por linha: Nome | Função | URL_Avatar)</h4>
                <textarea id="staff-adm-txt" rows="6" class="adm-textarea" placeholder="Ex: LK | Líder | https://link.com/avatar.jpg"></textarea>
            </div>

            <div class="adm-section">
                <h4>Parceiros (Uma por linha: Nome | Link | Tipo_Contato)</h4>
                <textarea id="parceiros-adm-txt" rows="6" class="adm-textarea" placeholder="Ex: Lojinha Do Toxino | https://link.com/grupo | WhatsApp"></textarea>
            </div>

            <div class="adm-section">
                <h4>Streamers (Uma por linha: Nome | Link | Plataforma | URL_Avatar)</h4>
                <textarea id="streamers-adm-txt" rows="6" class="adm-textarea" placeholder="Ex: Fulano | https://twitch.tv/fulano | Twitch | https://link.com/avatar.jpg"></textarea>
            </div>

            <div style="text-align: center;
margin-top: 20px;">
              <button id="save-changes" class="cta-btn" style="background: var(--gradient-blue);">Salvar Alterações</button>
              <button id="logout-adm" class="cta-btn" style="background: var(--gradient-red);
margin-top: 10px;">Sair</button>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
  <footer>
    &copy; 2025 Soberanos FF. Painel feito para a comunidade Free Fire.<br>
    <span style="color:var(--accent);font-weight:700;">#SoberanosNoTop</span>
    <div style="margin:10px 0 0 0;font-size:0.93em;color:#FFD700BB;">
      Status da guilda: <b id="guild-status-footer">Carregando...</b>
    </div>
    <div id="lastUpdate" style="margin:6px 0 0 0;font-size:0.88em;color:#fff;"></div>
    <div 
style="margin-top:8px;font-size:0.89em;color:#FFD700BB;">
      Desenvolvido por <b>SS DG 👑</b>
    </div>
  </footer>
  <div id="toast" class="toast-notification" role="alert" aria-live="assertive"></div>

  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>

  <script>
    // Configuração do Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyD1Vp65vNXknQEzDWtVGAsAyk-WIK0fCeg",
      authDomain: "paineis-soberanos.firebaseapp.com",
      databaseURL: "https://paineis-soberanos-default-rtdb.firebaseio.com",
      projectId: "paineis-soberanos",
      storageBucket: "paineis-soberanos.appspot.com",
      messagingSenderId: "1018061735067",
      appId: "1:101801735067:web:dac8173cab25faebb6b23e"
    };
    // Inicializando Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    // DARK/LIGHT MODE
    function setTheme(light) {
      document.body.classList.toggle('light', !!light);
      document.getElementById('modeIcon').textContent = light ?
"light_mode" : "dark_mode";
      localStorage.setItem("theme", light ? "light" : "dark");
    }

    document.getElementById('modeSwitch').onclick = function() {
      setTheme(!document.body.classList.contains('light'));
    };

    (function initTheme() {
      let t = localStorage.getItem("theme");
      if (t === "light") setTheme(true);
    })();
    // BACKGROUND PARTICLES
    function runParticles() {
      const c = document.getElementById('bg-particles');
      const ctx = c.getContext('2d');
      let w = window.innerWidth, h = window.innerHeight;
      let particles = [];
      const MAX_PARTICLES = (w < 768) ? 30 : 60; // Menos partículas em telas pequenas
      
      function resize() {
        w = window.innerWidth; h = window.innerHeight;
        c.width = w;
        c.height = h;
      }

      window.addEventListener('resize', resize);
      function randomColor() {
        const colors = ['#FFD700','#37a6ff','#a259ff','#f05454'];
        return colors[Math.floor(Math.random()*colors.length)];
      }

      function spawnParticle() {
        return {
          x: Math.random()*w,
          y: Math.random()*h,
          r: Math.random()*2+1,
          dx: (Math.random()-.5)*.7, /* Aumentado um pouco */
          dy: (Math.random()-.5)*.7, /* Aumentado um pouco */
          a: Math.random()*2*Math.PI,
   
          color: randomColor(),
        }
      }

      for(let i=0;i<MAX_PARTICLES;i++) particles.push(spawnParticle());
      function draw() {
        ctx.clearRect(0,0,w,h);
        for(let p of particles) {
          ctx.save();
          ctx.globalAlpha = 0.16;
          ctx.beginPath();
          ctx.arc(p.x,p.y,p.r,0,2*Math.PI);
          ctx.fillStyle = p.color;
          if (p.r > 1.5) { // Aplicar sombra apenas para partículas maiores
            ctx.shadowColor = p.color;
            ctx.shadowBlur = 8;
          }
          ctx.fill();
          ctx.restore();
          p.x += Math.cos(p.a)*p.dx;
          p.y += Math.sin(p.a)*p.dy;
          p.a += (Math.random()-.5)*0.02;
          if(p.x<0) p.x=w;
          if(p.x>w) p.x=0;
          if(p.y<0) p.y=h;
          if(p.y>h) p.y=0;
        }
        requestAnimationFrame(draw);
      }

      resize();
      draw();
    }

    runParticles();
    // Loader de aba + troca de aba
    document.querySelectorAll('.menu-btn').forEach(btn => {
      btn.addEventListener('click', function(e) {
        const loader = document.getElementById('tab-loader');
        loader.style.display = "flex";
        setTimeout(()=>{
          loader.style.display = "none";
          document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          document.querySelectorAll('.card').forEach(c => c.classList.remove('active'));
    
          setTimeout(() => {
            document.getElementById(btn.dataset.tab).classList.add('active');
          }, 40);
          if(window.innerWidth <= 700) {
            document.getElementById('menuNav').classList.remove('open');
            document.getElementById('menuHamburger').classList.remove('open');
          }
        }, 400);
      });
    });
    // Menu hamburguer responsivo
    const menuHamburger = document.getElementById('menuHamburger');
    const menuNav = document.getElementById('menuNav');
    menuHamburger.addEventListener('click', function() {
      menuHamburger.classList.toggle('open');
      menuNav.classList.toggle('open');
    });
    document.addEventListener('click', function(e) {
      if(window.innerWidth <= 700 && menuNav.classList.contains('open')) {
        if(!menuNav.contains(e.target) && e.target !== menuHamburger) {
          menuNav.classList.remove('open');
          menuHamburger.classList.remove('open');
        }
      }
    });
    // Ranking tab
    document.querySelectorAll('.ranking-tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.ranking-tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById('rankingSemanal').style.display = btn.dataset.rank === 'semanal' ? '' : 'none';
        document.getElementById('rankingMensal').style.display = btn.dataset.rank === 'mensal' ? 'block' : 'none';
      });
    });
    // CONTADOR GUERRA (melhor visual e responsivo)
    const horaGuerra = { "-3": 16, "-4": 15 };
    function getProximaGuerraEAndamento(fuso) {
      const now = new Date();
      let diaSemana = now.getUTCDay();
      let horaLocal = now.getUTCHours() + parseInt(fuso);
      if(horaLocal < 0) horaLocal += 24;
      if(horaLocal > 23) horaLocal -= 24;
      let minutos = now.getUTCMinutes();
      let emAndamento = false;

      // Considerando que a guerra dura algumas horas (ex: 7 horas)
      if(diaSemana === 6 && horaLocal >= horaGuerra[fuso] && horaLocal < horaGuerra[fuso]+7) emAndamento = true;
      let proximoSabado = new Date(now);
      let diasParaSabado = (6 - diaSemana + (emAndamento ? 7 : 0)) % 7;
      // Se já passou no sábado, vai para o próximo
      proximoSabado.setUTCDate(proximoSabado.getUTCDate() + diasParaSabado);
      proximoSabado.setUTCHours(horaGuerra[fuso] - parseInt(fuso), 0, 0, 0); // Ajusta para o horário UTC da guerra

      // Se a data calculada já passou o horário da guerra para esta semana, move para a próxima semana
      if (proximoSabado.getTime() < now.getTime() && !emAndamento) {
          proximoSabado.setUTCDate(proximoSabado.getUTCDate() + 7);
      }
      
      return { proximoSabado, emAndamento };
    }

    function atualizarInfoReset(fuso) {
      const info = document.getElementById('hora-reset-info');
      info.textContent = `Guerra todo sábado às ${horaGuerra[fuso].toString().padStart(2,"0")}:00 (${fuso == -3 ? "Brasília" : "Amazonas"})`;
    }

    function iniciarContadorGuerraFuso() {
      let fuso = document.getElementById("fuso-guerra").value;
      atualizarInfoReset(fuso);
      function atualizar() {
        const el = document.getElementById('contador-guerra');
        const { proximoSabado, emAndamento } = getProximaGuerraEAndamento(fuso);

        if(emAndamento) {
          el.textContent = "Guerra Em Andamento 🔥";
        } else {
          const agora = new Date();
          let diff = proximoSabado - agora;
          if (diff > 0) {
            const dias = Math.floor(diff / (1000 * 60 * 60 * 24));
            const horas = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const minutos = Math.floor((diff / (1000 * 60)) % 60);
            const segundos = Math.floor((diff / 1000) % 60);
            el.innerHTML =
              `Falta <b>${dias}d</b> <b>${horas}h</b> <b>${minutos}m</b> <b>${segundos}s</b> para a próxima guerra.`;
          } else {
            // Se já passou, recalcula para o próximo sábado (caso o intervalo perca um ciclo)
            // Ou se a guerra acabou de começar, atualiza para "em andamento"
            const { emAndamento: newEmAndamento } = getProximaGuerraEAndamento(fuso);
            if (newEmAndamento) {
                el.textContent = "Guerra Em Andamento 🔥";
            } else {
                // Se a guerra terminou, e ainda não é o próximo sabado
                // Esta parte pode ser otimizada para não rodar um setInterval desnecessariamente
                // ou para se ajustar dinamicamente.
                // Por enquanto, mantém o cálculo.
                 el.textContent = "Guerra Em Andamento 🔥";
            }
          }
        }
      }

      if(window.contadorGuerraInterval) clearInterval(window.contadorGuerraInterval);
      atualizar();
      window.contadorGuerraInterval = setInterval(atualizar, 1000);
    }

    document.getElementById("fuso-guerra").addEventListener("change", iniciarContadorGuerraFuso);
    iniciarContadorGuerraFuso();
    // Inicia o contador ao carregar a página

    // Formulário de recrutamento personalizado WhatsApp
    document.addEventListener('DOMContentLoaded', function() {
      var formRecrutamento = document.getElementById('form-recrutamento');
      if(formRecrutamento) {
        formRecrutamento.addEventListener('submit', function(e){
          e.preventDefault();

          // Validação do formulário
          const nick = document.getElementById('nick').value.trim();
          const idff = document.getElementById('idff').value.trim();
    
          const idade = document.getElementById('idade').value.trim();

          if(nick.length < 3 || nick.length > 20) {
            showToast("Nick deve ter entre 3 e 20 caracteres", 'error');
            return;
          }

          if(!/^\d+$/.test(idff)) {
            showToast("ID do Free Fire deve conter apenas números", 'error');
 
            return;
          }

          if(parseInt(idade) < 12 || parseInt(idade) > 99) { // Parse para garantir que é um número
            showToast("Idade deve ser entre 12 e 99 anos", 'error');
            return;
          }

          const patente = document.getElementById('patente').value.trim();
          const guilda_comp = document.getElementById('guilda_comp').value.trim();
          const funcao = formRecrutamento.querySelector('input[name="funcao"]:checked')?.value || '';
          let disp = [];
          formRecrutamento.querySelectorAll('input[name="disp"]:checked').forEach(c => disp.push(c.value));
          const modo = formRecrutamento.querySelector('input[name="modo"]:checked')?.value || '';
          const modoOutro = document.getElementById('modo_outro').value.trim();
          const troca_nick = formRecrutamento.querySelector('input[name="troca_nick"]:checked')?.value || '';
          const contato = document.getElementById('contato').value.trim();
          const motivo = document.getElementById('motivo').value.trim();
          const modo_final = (modo === "Outro" && modoOutro) ? modoOutro : modo;
          if (!nick || !idff || !idade || !patente || !guilda_comp || !funcao || !modo_final || !troca_nick || !contato || !motivo) {
            showToast("Preencha todos os campos obrigatórios!", 'error');
            return;
          }

          const numeroADM = "558173389225";
          // Telefone do ADM para contato
          const mensagem =
`Formulário de Recrutamento – Guilda Soberanos
Caminhe com reis.
Jogue como um soberano. 👑
1. Nick no jogo: ${nick}
2. ID do jogador: ${idff}
3. Idade: ${idade}
4. Patente atual: ${patente}
5. Já fez parte de guilda competitiva?
${guilda_comp}
6. Função principal: ${funcao}
7. Disponibilidade: ${disp.length ? disp.join(", ") : "Nenhuma"}
8. Modo que joga melhor: ${modo_final}
9. Troca nick pra guilda?
${troca_nick}
10. Instagram ou WhatsApp: ${contato}
11. Por que quer entrar: ${motivo}
12. Print do perfil: (Anexar aqui no WhatsApp)
`;
          const waLink = `https://wa.me/${numeroADM}?text=${encodeURIComponent(mensagem)}`;
          window.open(waLink, "_blank");

          showToast("Redirecionando para o WhatsApp... Não esqueça de anexar o print do perfil!", 'success');
          formRecrutamento.reset();
          // Reseta o formulário após o envio
        });
      }

      // Formulário de Sugestões
      const formSugestoes = document.getElementById('form-sugestoes');
      if (formSugestoes) {
          formSugestoes.addEventListener('submit', function(e) {
              e.preventDefault();
              const nome = document.getElementById('sugestao-nome').value.trim();
              const texto = document.getElementById('sugestao-texto').value.trim();

              if (!texto) {
                  showToast("Por favor, digite sua sugestão.", 'error');
                  return;
              }

              const novaSugestao = {
                  nome: nome || "Anônimo",
                  texto: texto,
                  data: new Date().toISOString().split('T')[0] // Formato YYYY-MM-DD
              };

              db.ref("site/sugestoes").push(novaSugestao)
                  .then(() => {
                      showToast("Sua sugestão foi enviada com sucesso!", 'success');
                      formSugestoes.reset();
                  })
                  .catch(error => {
                      console.error("Erro ao enviar sugestão:", error);
                      showToast("Erro ao enviar sugestão. Tente novamente.", 'error');
                  });
          });
      }
    });
    // Painel ADM
    document.getElementById('login-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const user = document.getElementById('adm-user').value;
      const pass = document.getElementById('adm-pass').value;

      // ATENÇÃO: Credenciais hardcoded são um risco de segurança.
      // Em produção, use Firebase Authentication e Security Rules.
      if(user === "admin777" && pass === "soberanos123") {
        document.getElementById('adm-login').style.display = 'none';
        document.getElementById('adm-panel').style.display = 'block';
       
        carregarDadosADM(); // Carrega dados específicos para o ADM
        showToast("Login bem-sucedido!", 'success');
      } else {
        showToast("Credenciais incorretas!", 'error');
      }
    });
    document.getElementById('logout-adm').addEventListener('click', function() {
      document.getElementById('adm-login').style.display = 'block';
      document.getElementById('adm-panel').style.display = 'none';
      document.getElementById('adm-user').value = '';
      document.getElementById('adm-pass').value = '';
      showToast("Você saiu do painel ADM", 'success');
    });
    // Função para carregar dados do Firebase no painel ADM
    function carregarDadosADM() {
      db.ref("site").once("value", snapshot => {
        if (!snapshot.exists()) return;

        const data = snapshot.val();

        document.getElementById("membro1").value = data.membros?.[0] || "";
        document.getElementById("membro2").value = data.membros?.[1] || "";
        document.getElementById("membro3").value = data.membros?.[2] || "";

        document.getElementById("regras-txt").value = data.regras?.join("\n") || "";
       
        document.getElementById("avisos-txt").value = data.avisos?.join("\n") || "";
        document.getElementById("novidades-adm-txt").value = data.novidades?.join("\n") || ""; // Novidades ADM
        document.getElementById("destaque-msg").value = data.destaqueMsg || "";
        document.getElementById("status-guilda").value = data.statusGuilda || "";
        
        // Carregar Staff para ADM
        if (data.staff) {
            document.getElementById("staff-adm-txt").value = data.staff.map(s => `${s.nome} | ${s.role} | ${s.avatar}`).join("\n");
        } else {
            document.getElementById("staff-adm-txt").value = "";
        }

        // Carregar Parceiros para ADM
        if (data.parceiros) {
            document.getElementById("parceiros-adm-txt").value = data.parceiros.map(p => `${p.nome} | ${p.link} | ${p.contato}`).join("\n");
        } else {
            document.getElementById("parceiros-adm-txt").value = "";
        }

        // Carregar Streamers para ADM
        if (data.streamers) {
            document.getElementById("streamers-adm-txt").value = data.streamers.map(s => `${s.nome} | ${s.link} | ${s.plataforma} | ${s.avatar}`).join("\n");
        } else {
            document.getElementById("streamers-adm-txt").value = "";
        }

      }).catch(error => {
        console.error("Erro ao carregar dados ADM:", error);
        showToast("Erro ao carregar dados para o painel ADM.", 'error');
      });
    }

    document.getElementById('save-changes').addEventListener('click', function() {
      if(!confirm('Tem certeza que deseja salvar as alterações?')) return;

      const membros = [
        document.getElementById('membro1').value,
        document.getElementById('membro2').value,
        document.getElementById('membro3').value
      ];

      const regras = document.getElementById('regras-txt').value.split('\n').filter(r => r.trim());
      const avisos = document.getElementById('avisos-txt').value.split('\n').filter(a => a.trim());
      const novidades = document.getElementById('novidades-adm-txt').value.split('\n').filter(n => n.trim()); // Novidades ADM
      const destaqueMsg = document.getElementById('destaque-msg').value;
      const statusGuilda = document.getElementById('status-guilda').value;

      // Processar Staff
      const staffRaw = document.getElementById('staff-adm-txt').value.split('\n').filter(s => s.trim());
      const staff = staffRaw.map(s => {
          const parts = s.split('|').map(p => p.trim());
          return { nome: parts[0] || '', role: parts[1] || '', avatar: parts[2] || '' };
      });

      // Processar Parceiros
      const parceirosRaw = document.getElementById('parceiros-adm-txt').value.split('\n').filter(p => p.trim());
      const parceiros = parceirosRaw.map(p => {
          const parts = p.split('|').map(p => p.trim());
          return { nome: parts[0] || '', link: parts[1] || '', contato: parts[2] || '' };
      });

      // Processar Streamers
      const streamersRaw = document.getElementById('streamers-adm-txt').value.split('\n').filter(s => s.trim());
      const streamers = streamersRaw.map(s => {
          const parts = s.split('|').map(p => p.trim());
          return { nome: parts[0] || '', link: parts[1] || '', plataforma: parts[2] || '', avatar: parts[3] || '' };
      });

  
      db.ref("site").set({
        membros,
        regras,
        avisos,
        novidades, // Adicionado
        destaqueMsg,
        statusGuilda,
        staff, // Adicionado
        parceiros, // Adicionado
        streamers // Adicionado
      }).then(() => {
        // Atualiza DOM localmente imediatamente após salvar
        carregarDadosPublicos(); // Recarrega os dados públicos para refletir as mudanças

        showToast("Alterações salvas com sucesso!", 'success');
      }).catch(error => {
        showToast("Erro ao salvar: " + error.message, 'error');
      });
    });

    function showToast(msg, type='success') {
      const toast = document.getElementById('toast');
      toast.textContent = '';
      // Limpa o conteúdo anterior
      let icon = (type === 'success') ? '✔️' : '❌';
      toast.className = `toast-notification toast-${type}`; // Redefine as classes
      toast.innerHTML = `<span style="font-size:1.35em;">${icon}</span> ${msg}`;
      toast.classList.add('show');
      // Mostra o toast imediatamente
      setTimeout(() => {
        toast.classList.remove('show');
      }, 2500);
    }

    // Função para carregar os dados públicos do Firebase
    function carregarDadosPublicos() {
      db.ref("site").once("value", snapshot => {
        if (!snapshot.exists()) return;

        const data = snapshot.val();

        // Atualizar "Melhores da Semana"
        const topMembersList = document.getElementById("top-members-list");
        if (data.membros && topMembersList) {
            topMembersList.innerHTML = ''; // Limpa 
            data.membros.forEach((member, index) => {
                const li = document.createElement("li");
                let badgeClass = '';
                let medalClass = '';
                let medalIcon = '';
       
                if (index === 0) {
                    badgeClass = ''; // Default golden
                    medalClass = '';
                    medalIcon = '🥇';
                } else 
                if (index === 1) {
                    badgeClass = 'second';
                    medalClass = 'second';
                    medalIcon = '🥈';
                } else if (index === 2) {
                    badgeClass = 'third';
                    medalClass = 'third';
                    medalIcon = '🥉';
                }
                li.innerHTML = `
                    <span class="ranking-badge ${badgeClass}">${index + 1}º</span>
                    ${member}
                    <span class="ranking-bar"></span>
           
                    <span class="medal ${medalClass}">${medalIcon}</span>
                `;
                topMembersList.appendChild(li);
            });
            // Adiciona a mensagem de parabéns
            let congratsMsg = topMembersList.closest('.card').querySelector('.congrats-message');
            if (!congratsMsg) {
                congratsMsg = document.createElement("div");
                congratsMsg.className = 'congrats-message';
                congratsMsg.style = "color:#FFD70099; font-size:1em;text-align:center; margin-top:18px;";
                topMembersList.closest('.card').appendChild(congratsMsg);
            }
            congratsMsg.textContent = "Parabéns aos melhores pontuadores desta semana!";
        } else if (topMembersList) {
            topMembersList.innerHTML = '<li>Nenhum membro classificado esta semana.</li>';
            const congratsMsg = topMembersList.closest('.card').querySelector('.congrats-message');
            if(congratsMsg) congratsMsg.textContent = ''; // Limpa a mensagem se não houver membros
        }

        // Preencher Regras da Guilda
        const regrasList = document.getElementById("regras-ul");
        regrasList.innerHTML = "";
        if (data.regras && data.regras.length > 0) {
            data.regras.forEach(r => {
                const li = document.createElement("li");
                li.textContent = r;
                regrasList.appendChild(li);
            });
        } else {
            regrasList.innerHTML = '<li>Nenhuma regra definida ainda.</li>';
        }

        // Preencher Avisos Recentes
        const avisosList = document.getElementById("avisos-ul");
        avisosList.innerHTML = "";
        if (data.avisos && data.avisos.length > 0) {
            data.avisos.forEach(a => {
                const li = document.createElement("li");
                let avisoTexto = a;
                const dateMatch = a.match(/^(\d{4}-\d{2}-\d{2})\s*-\s*(.*)/);
                if (dateMatch) {
                    const datePart = new Date(dateMatch[1]).toLocaleDateString('pt-BR', { year: 'numeric', month: 'numeric', day: 'numeric' });
                    avisoTexto = `<span style="font-size:0.9em; opacity:0.8; margin-right:5px;">(${datePart})</span> ${dateMatch[2]}`;
                }
                li.innerHTML = `<span style="color:#FFD700;">${avisoTexto}</span>`;
                avisosList.appendChild(li);
            });
        } else {
            avisosList.innerHTML = '<li>Nenhum aviso no momento.</li>';
        }

        // Preencher Novidades Recentes
        const novidadesList = document.getElementById("novidades-ul");
        novidadesList.innerHTML = "";
        if (data.novidades && data.novidades.length > 0) {
            data.novidades.forEach(n => {
                const li = document.createElement("li");
                li.innerHTML = `<span style="color:#FFD700;">${n}</span>`;
                novidadesList.appendChild(li);
            });
            document.getElementById('novidades-message').style.display = 'none';
        } else {
            novidadesList.innerHTML = '<li>Nenhuma novidade no momento.</li>';
            document.getElementById('novidades-message').style.display = 'block';
        }

        // Preencher Staff
        const staffList = document.getElementById("staff-list");
        staffList.innerHTML = "";
        if (data.staff && data.staff.length > 0) {
            data.staff.forEach(member => {
                const li = document.createElement("li");
                li.className = "staff-member";
                li.innerHTML = `
                    <img class="staff-avatar" src="${member.avatar || 'https://i.imgur.com/7pYLORP.png'}" alt="${member.nome}" loading="lazy">
                    <span class="staff-info">
                        <span class="staff-name">${member.nome}</span>
                        <span class="staff-role">${member.role}</span>
                    </span>
                `;
                staffList.appendChild(li);
            });
        } else {
            staffList.innerHTML = '<li style="color:#FFD70099; text-align:center;">Nenhum membro da equipe cadastrado.</li>';
        }

        // Preencher Parceiros
        const parceirosList = document.getElementById("parceiros-list");
        parceirosList.innerHTML = "";
        if (data.parceiros && data.parceiros.length > 0) {
            data.parceiros.forEach(parceiro => {
                const div = document.createElement("div");
                div.className = "parceiro-card";
                div.innerHTML = `
                    <div style="margin:8px 0 6px 0; font-weight:bold; color:#ffd700; font-size:1.12em;">${parceiro.nome}</div>
                    <a href="${parceiro.link}" target="_blank" class="cta-btn ${parceiro.contato === 'WhatsApp' ? 'whatsapp' : ''}">Entrar Em Contato</a>
                `;
                parceirosList.appendChild(div);
            });
        } else {
            parceirosList.innerHTML = '<div style="color:#FFD70099; text-align:center;">Nenhum parceiro cadastrado.</div>';
        }

        // Preencher Streamers
        const streamersList = document.getElementById("streamers-list");
        streamersList.innerHTML = "";
        if (data.streamers && data.streamers.length > 0) {
            data.streamers.forEach(streamer => {
                const li = document.createElement("li");
                li.className = "streamer-card";
                li.innerHTML = `
                    <img class="streamer-avatar" src="${streamer.avatar || 'https://i.imgur.com/7pYLORP.png'}" alt="${streamer.nome}" loading="lazy">
                    <span class="streamer-info">
                        <span class="streamer-name">${streamer.nome}</span>
                        <span class="streamer-platform">${streamer.plataforma}</span>
                    </span>
                    <a href="${streamer.link}" target="_blank" class="cta-btn" style="margin-left:auto; font-size:0.9em; padding: 8px 15px;">Ver Live</a>
                `;
                streamersList.appendChild(li);
            });
            document.getElementById('streamer-message').style.display = 'none';
        } else {
            streamersList.innerHTML = ''; // Limpa se não tiver
            document.getElementById('streamer-message').style.display = 'block';
        }


        // Atualizar Mensagem de Destaque
        const destaqueElement = document.getElementById("destaque-message-display");
        if (destaqueElement) {
            destaqueElement.textContent = data.destaqueMsg ||
"Recrutamento aberto! Preencha o formulário e anexe seu print do perfil. Participe da família Soberanos FF!";
        }

        // Atualizar Status da Guilda no Rodapé
        const statusGuildaElement = document.getElementById("guild-status-footer");
        if (statusGuildaElement) {
            statusGuildaElement.textContent = data.statusGuilda || "Em manutenção";
        }

      }).catch(error => {
        console.error("Erro ao carregar dados públicos:", error);
        showToast("Erro ao carregar dados do site. Tente recarregar a página.", 'error');
      });
    }

    // Carrega dados públicos na inicialização
    document.addEventListener("DOMContentLoaded", carregarDadosPublicos);
    // Atualiza a última data de atualização
    document.getElementById('lastUpdate').textContent = "Última atualização: " + new Date().toLocaleString('pt-BR');
  </script>
</body>
  </html>
